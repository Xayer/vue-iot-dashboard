{"version":3,"sources":["webpack:///./src/views/integrations/spotify.vue?2602","webpack:///./src/views/integrations/spotify.vue","webpack:///./src/views/integrations/spotify.vue?4016","webpack:///./src/views/integrations/spotify.vue?b879","webpack:///./src/views/integrations/spotify.vue?1742"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","$route","query","code","integrationActive","_e","attrs","authUrl","_l","topTrack","key","id","album","images","url","artists","join","width","height","href","_s","name","artist","staticRenderFns","topTracks","getAccessToken","existingToken","localStorage","getItem","setItem","JSON","stringify","response","refresh_token","then","items","catch","component"],"mappings":"mIAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,OAAO,CAACN,EAAIO,GAAG,aAAeP,EAAIQ,OAAOC,MAAMC,MAASV,EAAIW,kBAA8FX,EAAIY,KAA/ER,EAAG,IAAI,CAACS,MAAM,CAAC,KAAOb,EAAIc,UAAU,CAACd,EAAIO,GAAG,+BAAyCP,EAAa,UAAEI,EAAG,UAAUJ,EAAIe,GAAIf,EAAa,WAAE,SAASgB,GAAU,OAAOZ,EAAG,UAAU,CAACa,IAAID,EAASE,IAAI,CAAEF,EAASG,MAAY,OAAEf,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMG,EAASG,MAAMC,OAAO,GAAGC,IAAI,IAAQL,EAAa,KAAI,MAASA,EAASM,QAAQC,KAAK,MAAQ,MAAQP,EAASG,MAAMC,OAAO,GAAGI,MAAM,OAASR,EAASG,MAAMC,OAAO,GAAGK,UAAUzB,EAAIY,KAAKR,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,KAAK,CAACA,EAAG,IAAI,CAACS,MAAM,CAAC,KAAOG,EAASU,OAAO,CAAC1B,EAAIO,GAAGP,EAAI2B,GAAGX,EAASY,WAAW5B,EAAIe,GAAIC,EAAgB,SAAE,SAASa,GAAQ,OAAOzB,EAAG,KAAK,CAACa,IAAIY,EAAOX,IAAI,CAACd,EAAG,IAAI,CAACS,MAAM,CAAC,KAAOgB,EAAOH,OAAO,CAAC1B,EAAIO,GAAGP,EAAI2B,GAAGE,EAAOD,eAAc,QAAO,GAAG5B,EAAIY,QACx4BkB,EAAkB,G,gICyBD,EAArB,YADA,iD,+DAEC,EAAAC,UAAY,GAFb,EACA,+JAeE9B,KAAK+B,iBAfP,4LAmBM/B,KAAKO,OAAOC,MAAMC,MAAST,KAAKU,kBAnBtC,oDAsBQsB,EAAgBC,aAAaC,QAAQ,QACvCF,GAAmC,cAAlBA,EAvBvB,uBAwBGC,aAAaE,QAAQ,OAA6BC,KAAKC,WAAU,IAxBpE,kCAyB0B,eAAkBrC,KAAKO,OAAOC,MAAMC,OAzB9D,OAyBS6B,EAzBT,OA0BGL,aAAaE,QAAQ,OAAYC,KAAKC,UAAUC,EAASC,gBA1B5D,iDA4BQ,iBAAeC,MAAK,SAACV,GAC1B,EAAKA,UAAYA,EAAUW,MAC3BR,aAAaE,QAAQ,OAA6BC,KAAKC,WAAU,OAC/DK,OAAM,WACRT,aAAaE,QAAQ,OAA6BC,KAAKC,WAAU,QAhCpE,gFAKE,iEAA2D,OAA3D,4CAAuG,OAAvG,0DALF,wCAWE,MAA6E,SAAtED,KAAKC,UAAUJ,aAAaC,QAAQ,aAX7C,GAAoD,QAA/B,EAAsB,QAD1C,eAAU,KACU,WC1B+X,I,wBCQhZS,EAAY,eACd,EACA7C,EACA+B,GACA,EACA,KACA,KACA,MAIa,aAAAc,E,kECnBf,yBAAiiB,EAAG","file":"js/spotify-integration-page.d8f5be7e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',{staticClass:\"m-b\"},[_vm._v(\"Spotify\")]),(!_vm.$route.query.code && !_vm.integrationActive)?_c('a',{attrs:{\"href\":_vm.authUrl}},[_vm._v(\"Authenticate with Spotify\")]):_vm._e(),(_vm.topTracks)?_c('section',_vm._l((_vm.topTracks),function(topTrack){return _c('article',{key:topTrack.id},[(topTrack.album.images)?_c('img',{attrs:{\"src\":topTrack.album.images[2].url,\"alt\":((topTrack.name) + \" - \" + (topTrack.artists.join(', '))),\"width\":topTrack.album.images[2].width,\"height\":topTrack.album.images[2].height}}):_vm._e(),_c('div',{staticClass:\"titles\"},[_c('h2',[_c('a',{attrs:{\"href\":topTrack.href}},[_vm._v(_vm._s(topTrack.name))])]),_vm._l((topTrack.artists),function(artist){return _c('h3',{key:artist.id},[_c('a',{attrs:{\"href\":artist.href}},[_vm._v(_vm._s(artist.name))])])})],2)])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { authenticateToken, clientId, getAccessToken as spotifyGetAccessToken, getTopTracks, integrationActiveStorageKey, redirectUri, storageKey } from '@/modules/apis/spotify';\n\n@Component({})\nexport default class SpotifyIntegrationPage extends Vue {\n\ttopTracks = [];\n\n\t// eslint-disable-next-line class-methods-use-this\n\tget authUrl(): string {\n\t\treturn `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${redirectUri}&scope=user-read-currently-playing%20\nuser-top-read`;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tget integrationActive() {\n\t\treturn JSON.stringify(localStorage.getItem(integrationActiveStorageKey)) === \"true\";\n\t}\n\n\tasync mounted() {\n\t\tthis.getAccessToken();\n\t}\n    \n\tasync getAccessToken() {\n\t\tif(!this.$route.query.code && !this.integrationActive) {\n\t\t\treturn;\n\t\t}\n\t\tconst existingToken = localStorage.getItem(storageKey);\n\t\tif(!existingToken || existingToken === 'undefined') {\n\t\t\tlocalStorage.setItem(integrationActiveStorageKey, JSON.stringify(false));\n\t\t\tconst response = await authenticateToken(this.$route.query.code as string);\n\t\t\tlocalStorage.setItem(storageKey, JSON.stringify(response.refresh_token));\n\t\t}\n\t\tawait getTopTracks().then((topTracks) => {\n\t\t\tthis.topTracks = topTracks.items;\n\t\t\tlocalStorage.setItem(integrationActiveStorageKey, JSON.stringify(true));\n\t\t}).catch(() => {\n\t\t\tlocalStorage.setItem(integrationActiveStorageKey, JSON.stringify(false));\n\t\t});\t\t\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spotify.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spotify.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./spotify.vue?vue&type=template&id=88909e90&\"\nimport script from \"./spotify.vue?vue&type=script&lang=ts&\"\nexport * from \"./spotify.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./spotify.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spotify.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./spotify.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}