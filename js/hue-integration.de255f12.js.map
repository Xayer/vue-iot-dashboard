{"version":3,"sources":["webpack:///./src/views/integrations/hue.vue?dcde","webpack:///./src/views/integrations/hue.vue","webpack:///./src/views/integrations/hue.vue?96d5","webpack:///./src/views/integrations/hue.vue?d74a","webpack:///./src/views/integrations/hue.vue?f64a"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","hueAvailable","staticClass","class","online","token","_v","_s","devices","lights","lightLabel","_e","directives","name","rawName","value","expression","domProps","on","$event","target","composing","bridgeAddress","registerToken","errorMessage","staticRenderFns","loading","bridgeAddressNotFound","localStorage","bridge_address","found","devicesTimeout","setInterval","detectDevices","clearInterval","$store","dispatch","catch","error","description","commit","alert","then","$forceUpdate","Object","keys","length","components","Button","computed","component"],"mappings":"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","file":"js/hue-integration.de255f12.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h4',{attrs:{\"title\":_vm.hueAvailable ? 'Connected' : 'Disconnected'}},[_c('i',{staticClass:\"bi bi-lightbulb\",class:_vm.hueAvailable && _vm.online && _vm.token ? 'on': 'off'}),_vm._v(\" Hue \"+_vm._s(_vm.hueAvailable ? 'Connected' : 'Disconnected')+\" \")]),(_vm.hueAvailable\n\t\t&& _vm.token\n\t\t&& _vm.devices\n\t\t&& _vm.devices.lights)?_c('Button',{staticClass:\"m-t primary\"},[_vm._v(_vm._s(_vm.lightLabel)+\" Lights\")]):_vm._e(),(_vm.bridgeAddressNotFound)?_c('span',{staticClass:\"m-r\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.bridgeAddress),expression:\"bridgeAddress\"}],attrs:{\"type\":\"text\",\"placeholder\":\"Hue Bridge IP\"},domProps:{\"value\":(_vm.bridgeAddress)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.bridgeAddress=$event.target.value}}})]):_vm._e(),(!_vm.hueAvailable || !_vm.token)?_c('Button',{staticClass:\"danger\",on:{\"click\":function($event){return _vm.registerToken()}}},[_vm._v(\"!\")]):_vm._e(),(_vm.loading)?_c('span',{staticClass:\"loading\"},[_vm._v(\"Loading\")]):_vm._e(),(_vm.errorMessage)?_c('span',{staticClass:\"error\",domProps:{\"textContent\":_vm._s(_vm.errorMessage)}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\tComponent, Prop, Vue, Watch,\n} from 'vue-property-decorator';\nimport { mapGetters } from 'vuex';\nimport { Button } from '@/components/atoms';\n\n@Component({\n\tcomponents: {\n\t\tButton,\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tdevices: 'hue/devices',\n\t\t\ttoken: 'hue/token',\n\t\t\thueAvailable: 'hue/available',\n\t\t\tonline: 'internet/online',\n\t\t}),\n\t},\n})\nexport default class HueIntegration extends Vue {\n\ttoken!: string;\n\n\thueAvailable!: boolean;\n\n\tloading: boolean = false;\n\n\tbridgeAddress: string = '';\n\n\tbridgeAddressNotFound = false;\n\n\tdevices!: {\n\t\tlights: Object,\n\t};\n\n\terrorMessage: string = '';\n\n\tdevicesTimeout!: ReturnType<typeof setTimeout>;\n\n\t// eslint-disable-next-line class-methods-use-this\n\tcreated() {\n\t\tif (localStorage.bridge_address) {\n\t\t\tthis.bridgeAddress = localStorage.bridge_address;\n\t\t\tthis.bridgeAddressNotFound = false;\n\t\t} else {\n\t\t\tthis.bridgeAddressNotFound = true;\n\t\t}\n\t}\n\n\t@Watch('bridgeAddressNotFound')\n\tbridgeAddressChanged(found: boolean) {\n\t\tif (found) {\n\t\t\tthis.devicesTimeout = setInterval(() => {\n\t\t\t\tthis.detectDevices();\n\t\t\t}, 3000);\n\t\t} else {\n\t\t\tclearInterval(this.devicesTimeout);\n\t\t}\n\t}\n\n\tdetectDevices() {\n\t\tthis.$store.dispatch('hue/getDevices').catch((error: any) => {\n\t\t\tthis.errorMessage = error.description;\n\t\t});\n\t}\n\n\tregisterToken() {\n\t\tif (this.bridgeAddressNotFound) {\n\t\t\tthis.$store.commit('hue/SET_BRIDGE_ADDRESS', this.bridgeAddress);\n\t\t\tthis.bridgeAddressNotFound = false;\n\t\t\tthis.detectDevices();\n\t\t}\n\t\tif (this.token) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loading = true;\n\t\t// eslint-disable-next-line no-alert\n\t\talert('go to your Hue Bridge and click the link button (circle). When you have done that, click okay.');\n\t\tthis.$store.dispatch('hue/registerToken').then(() => {\n\t\t\tthis.errorMessage = '';\n\t\t\tthis.$forceUpdate();\n\t\t\tthis.loading = false;\n\t\t}).catch((error: any) => {\n\t\t\tthis.errorMessage = error.description;\n\t\t\tthis.loading = false;\n\t\t});\n\t}\n\n\tget lightLabel() {\n\t\treturn this.devices && this.devices.lights ? Object.keys(this.devices.lights).length : 'No';\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hue.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hue.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./hue.vue?vue&type=template&id=308402b6&scoped=true&\"\nimport script from \"./hue.vue?vue&type=script&lang=ts&\"\nexport * from \"./hue.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./hue.vue?vue&type=style&index=0&id=308402b6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"308402b6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hue.vue?vue&type=style&index=0&id=308402b6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./hue.vue?vue&type=style&index=0&id=308402b6&lang=scss&scoped=true&\""],"sourceRoot":""}