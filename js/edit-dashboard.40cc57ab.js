(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit-dashboard"],{"18d1":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("portal",{attrs:{to:"page-title"}},[t._v("Edit Dashboard")]),n("portal",{attrs:{to:"page-actions"}},[n("Button",{key:"view-dashboard",staticClass:"m-r m-b",on:{click:t.viewDashboard}},[t._v("View Dashboard")]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],key:"dashboardErrors",staticClass:"error m-b"},[t._v(t._s(t.errorMessage))]),n("Select",{key:"selectDashboardWidgets",staticClass:"m-b",attrs:{options:t.widgetOptions},model:{value:t.selectedWidget,callback:function(e){t.selectedWidget=e},expression:"selectedWidget"}}),n("Button",{key:"addWidget",staticClass:"m-l m-b",on:{click:t.addWidget}},[t._v("Add Widget")]),n("Button",{key:"saveDashboard",staticClass:"primary m-l m-b",on:{click:t.saveWidgetLayout}},[t._v("Save Dashboard")])],1),t.DashboardWidgets?n("GridLayout",{attrs:{layout:t.DashboardWidgets,cols:t.defaultSettings.columns,"row-height":t.defaultSettings.columnHeight,"is-draggable":!0,"is-resizable":!0,margin:t.defaultSettings.margin,"use-css-transforms":!0,responsive:!0},on:{"update:layout":function(e){t.DashboardWidgets=e}}},t._l(t.DashboardWidgets,(function(e,r){return n("GridItem",{key:""+e.i+e.guid,attrs:{i:e.i,w:e.w,h:e.h,x:e.x,y:e.y,"min-w":e.minW||1,"min-h":e.minH||1,"max-w":e.maxW||1/0,"max-h":e.maxH||1/0,dragAllowFrom:".drag"}},[n("span",{staticClass:"debug"},[t._v("x: "+t._s(e.x)+" y: "+t._s(e.y)+" w: "+t._s(e.w)+" h: "+t._s(e.h))]),n("WidgetWrapper",[n("div",{staticClass:"settings-header m-b"},[n("span",{staticClass:"drag m-r"},[n("i",{staticClass:"bi bi-arrows-move"})]),n("h2",[t._v(t._s(e.type))]),n("span",{staticClass:"remove m-l",on:{click:function(e){return t.removeWidget(r)}}},[n("i",{staticClass:"bi bi-x-circle"})])]),n(t.widgetSettingsComponent(e.type),{tag:"component",model:{value:t.DashboardWidgets[r].settings,callback:function(e){t.$set(t.DashboardWidgets[r],"settings",e)},expression:"DashboardWidgets[itemIndex].settings"}})],1)],1)})),1):n("p",[t._v('No Widgets added yet. Select a widget from the dropdown and click "Add Widget".')])],1)},a=[],i=(n("a4d3"),n("99af"),n("4de4"),n("caad"),n("d81d"),n("a434"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("07ac"),n("25f0"),n("2532"),n("159b"),n("ade3")),s=n("2909"),o=n("53ca"),c=n("d4ec"),u=n("bee2"),l=n("99de"),p=n("7e84"),d=n("262e"),b=n("9ab4"),g=n("1b40"),f=n("7be8"),h=n.n(f),O=n("59e4"),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},t._l(t.settings,(function(e,r){return n("div",{key:r+":"+e},[n("label",{attrs:{for:r}},[t._v(t._s(r)+": "),n("FormInput",{staticClass:"form-field",attrs:{value:t.settings[r],name:r},on:{input:function(e){return t.updateValue(r,e)}}})],1)])})),0)},y=[],m=n("e3b8"),j=n("a739");function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W=function(t){function e(){return Object(c["a"])(this,e),Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments))}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"updateValue",value:function(t,e){this.$emit("input",D({},this.settings,Object(i["a"])({},t,e)))}}]),e}(g["d"]);b["a"]([Object(g["c"])()],W.prototype,"settings",void 0),b["a"]([Object(g["b"])()],W.prototype,"title",void 0),W=b["a"]([Object(g["a"])({components:{FormInput:m["a"],WidgetWrapper:j["a"]}})],W);var k=W,S=k,x=(n("e515"),n("2877")),P=Object(x["a"])(S,v,y,!1,null,null,null),_=P.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[n("label",{attrs:{for:"hueGroup"}},[t._v("Hue Group "),n("Select",{staticClass:"m-t",attrs:{value:t.group,options:t.options,name:"hueGroup"},on:{input:function(e){return t.updateValue("group",e)}}})],1)])},E=[],$=(n("b0c0"),n("2f62"));function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.group="",t}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"mounted",value:function(){this.groupFromSettings&&(this.group=this.settings.group?this.settings.group:"")}},{key:"setDefaultValueBasedOnOptions",value:function(){""===this.group&&this.options[0]&&(this.group=this.options[0].value)}},{key:"updateValue",value:function(t,e){this.$emit("input",G({},this.settings,Object(i["a"])({},t,e)))}},{key:"groupFromSettings",get:function(){return this.settings.group?this.settings.group:null}},{key:"options",get:function(){return this.devices.groups?[{text:"Select Group",value:"",disabled:!0}].concat(Object(s["a"])(Object.values(this.devices.groups).map((function(t){return{text:t.name,value:t.name}})))):[]}}]),e}(g["d"]);b["a"]([Object(g["c"])()],V.prototype,"settings",void 0),b["a"]([Object(g["b"])()],V.prototype,"title",void 0),b["a"]([Object(g["e"])("options")],V.prototype,"setDefaultValueBasedOnOptions",null),V=b["a"]([Object(g["a"])({components:{Select:O["c"]},computed:G({},Object($["b"])({devices:"hue/devices",token:"hue/token",hueAvailable:"hue/available"}))})],V);var M=V,A=M,B=(n("1eae"),Object(x["a"])(A,C,E,!1,null,"210364fc",null)),F=B.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[n("label",{attrs:{for:"City"}},[t._v("City "),n("Input",{staticClass:"m-t",attrs:{value:t.city},on:{input:function(e){return t.updateValue("city",e)}}})],1),n("label",{attrs:{for:"Unit"}},[t._v("Unit "),n("Select",{staticClass:"m-t",attrs:{value:t.unit,options:t.options,name:"Unit"},on:{input:function(e){return t.updateValue("units",e)}}})],1)])},L=[];function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var N=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.unit="metric",t.city="Odense",t.options=[{text:"metric",value:"metric"},{text:"imperial",value:"imperial"}],t}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"mounted",value:function(){this.settings.units&&(this.unit=this.settings.units),this.settings.city&&(this.city=this.settings.city)}},{key:"updateValue",value:function(t,e){this.$emit("input",J({},this.settings,Object(i["a"])({},t,e)))}}]),e}(g["d"]);b["a"]([Object(g["c"])()],N.prototype,"settings",void 0),b["a"]([Object(g["b"])()],N.prototype,"title",void 0),N=b["a"]([Object(g["a"])({components:{Select:O["c"],Input:O["b"]}})],N);var U=N,z=U,R=(n("f466"),Object(x["a"])(z,H,L,!1,null,"122d3eaa",null)),q=R.exports,K=n("3889"),Q=n("9c40");function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Z=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(l["a"])(this,Object(p["a"])(e).apply(this,arguments)),t.defaultSettings=Q["a"],t.errorMessage="",t.selectedWidget=K["b"].TextWidget.toString(),t.DashboardWidgets=null,t.widgetOptions=Object.values(K["b"]).map((function(t){return{text:t,value:t}})),t}return Object(d["a"])(e,t),Object(u["a"])(e,[{key:"created",value:function(){this.DashboardWidgets=this.getDashboardWidgets()}},{key:"getDashboardWidgets",value:function(){var t=[];if(localStorage.getItem(K["c"])){var e=JSON.parse(localStorage.getItem(K["c"])||"");e&&"object"===Object(o["a"])(e)&&(t=e)}return t}},{key:"addWidget",value:function(){if(K["a"][this.selectedWidget]){var t=K["a"][this.selectedWidget],e=(Math.max.apply(Math,Object(s["a"])(this.DashboardWidgets.map((function(t){return t.x}))).concat([0])),Math.max.apply(Math,Object(s["a"])(this.DashboardWidgets.map((function(t){return t.y}))).concat([0]))),n=Y({},t,{i:Date.now(),guid:Date.now(),x:0,y:e?e+1:0});this.DashboardWidgets.push(n)}else this.errorMessage="Widget doesn't have any default settings"}},{key:"saveWidgetLayout",value:function(){localStorage.setItem(K["c"],JSON.stringify(this.DashboardWidgets))}},{key:"removeWidget",value:function(t){this.DashboardWidgets.splice(t,1)}},{key:"viewDashboard",value:function(){this.$router.push({name:"dashboard",params:{id:this.$route.params.id}})}},{key:"widgetSettingsComponent",value:function(t){return this.$options.components&&Object.keys(this.$options.components).includes(t)?t:"WidgetSettings"}}]),e}(g["d"]);Z=b["a"]([Object(g["a"])({components:{GridItem:h.a.GridItem,GridLayout:h.a.GridLayout,WidgetSettings:_,Select:O["c"],Button:O["a"],Weather:q,HueGroup:F,WidgetWrapper:j["a"],Forecast:q}})],Z);var tt=Z,et=tt,nt=(n("bbb3"),Object(x["a"])(et,r,a,!1,null,null,null));e["default"]=nt.exports},"1eae":function(t,e,n){"use strict";var r=n("2e2d"),a=n.n(r);a.a},2532:function(t,e,n){"use strict";var r=n("23e7"),a=n("5a34"),i=n("1d80"),s=n("ab13");r({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(i(this)).indexOf(a(t),arguments.length>1?arguments[1]:void 0)}})},"2e2d":function(t,e,n){},"44e7":function(t,e,n){var r=n("861d"),a=n("c6b6"),i=n("b622"),s=i("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==a(t))}},"548a":function(t,e,n){},"5a34":function(t,e,n){var r=n("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},ab13:function(t,e,n){var r=n("b622"),a=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,"/./"[t](e)}catch(r){}}return!1}},bbb3:function(t,e,n){"use strict";var r=n("dea6"),a=n.n(r);a.a},caad:function(t,e,n){"use strict";var r=n("23e7"),a=n("4d64").includes,i=n("44d2");r({target:"Array",proto:!0},{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},dea6:function(t,e,n){},e3b8:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n(t.settingType,t._b({tag:"component",model:{value:t.setting,callback:function(e){t.setting=e},expression:"setting"}},"component",t.$attrs,!1))],1)},a=[],i=n("53ca"),s=n("d4ec"),o=n("bee2"),c=n("99de"),u=n("7e84"),l=n("262e"),p=n("9ab4"),d=n("1b40"),b=n("59e4"),g=function(t){function e(){return Object(s["a"])(this,e),Object(c["a"])(this,Object(u["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"settingType",get:function(){return"object"===Object(i["a"])(this.setting)?"Select":"Input"}}]),e}(d["d"]);p["a"]([Object(d["c"])()],g.prototype,"setting",void 0),g=p["a"]([Object(d["a"])({inheritAttrs:!1,components:{Input:b["b"],Select:b["c"]}})],g);var f=g,h=f,O=n("2877"),v=Object(O["a"])(h,r,a,!1,null,null,null),y=v.exports;n.d(e,"a",(function(){return y}))},e515:function(t,e,n){"use strict";var r=n("548a"),a=n.n(r);a.a},f381:function(t,e,n){},f466:function(t,e,n){"use strict";var r=n("f381"),a=n.n(r);a.a}}]);
//# sourceMappingURL=edit-dashboard.40cc57ab.js.map